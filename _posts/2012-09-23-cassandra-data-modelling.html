---
layout: post
title: Cassandra Data Modelling
tags: []
status: draft
type: post
published: false
meta:
  _edit_lock: '1373621670'
  _edit_last: '1'
---
We have been migrating our biggest data store to Cassandra from Mongo and I thought it was a useful exercise to talk through what makes Cassandra a better data store for our data set and how you can model time series data on Cassandra.

There are a range of factors informing the move, from data modeling to operational advantages with Cassandra's model. Operational advantages, including rack and data center awareness, and a zero single point of failure architecture map well to the cloud.

But, the primary reason is that we have a very write-centric workload and Cassandra is built for that use case. We can sustain rather huge write loads, and because the data is modeled well in Cassandra, we don't really need any secondary indexes.

Another is the speed and ease with which we can get our data out of Cassandra with very little overhead. That might sound funny because MongoDB is so flexible with regard to indexing and querying. But Cassandra does a few things very well that Mongo doesn't and one of those is range queries for time series data. One of our use cases is to be able to get data over an arbitrary time range for a particular account. That can be a challenge for other data stores which require indexing, because you may end up with several indexes over the same time series data, or denormalizing it into several inflexible time buckets and thereby limiting your query flexibility while at the same time multiplying the cost of writes.

We got around that with Cassandra because it doesn't require us to generate any indexes for time series data. It's a NoSQL store with a multidimensional hash data model that we can twist to our needs rather easily. The Cassandra community have done themselves a disservice by inventing a new vocabulary for talking about the structure of data in the store. But if you ignore all that, it's just a big persistent hash with some great engineering underneath.
